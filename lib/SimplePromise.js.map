{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5dd76986b251ed5491d4","webpack:///./src/index.js"],"names":["SimplePromise","isFunction","f","isObject","o","PENDING","FULFILLED","REJECTED","resolver","TypeError","callbacks","state","resolve","reject","e","transition","x","setTimeout","forEach","cb","onFulfilled","onRejected","value","then","reason","resolvePromise","promise","v","thenCalledOrThrow","call","y","r","prototype","onFulfill","onReject","promise2","schedulePromiseResolution","push","catch","finally","all","promises","Array","isArray","remaining","length","values","i","race"],"mappings":"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","file":"SimplePromise.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"SimplePromise\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"SimplePromise\"] = factory();\n\telse\n\t\troot[\"SimplePromise\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 5dd76986b251ed5491d4\n **/","const isFunction = (f) => typeof f === 'function';\nconst isObject = (o) => typeof o === 'object';\n\nconst PENDING = 0;\nconst FULFILLED = 1;\nconst REJECTED = 2;\n\nexport default function SimplePromise(resolver) {\n    if (!isFunction(resolver)) {\n        throw new TypeError(`SimplePromise resolver ${resolver} is not a function`);\n    }\n\n    this.callbacks = [];\n    this.state = PENDING;\n\n    // TODO - bug when rejecting with new TypeError, the original message is hidden\n    try {\n        resolver(resolve, reject);\n    }\n    catch (e) {\n        reject(e);\n    }\n\n    const transition = (state, x) => {\n        if (this.state === PENDING) {\n            setTimeout(() => {\n                this.state = state;\n                this.x = x;\n\n                this.callbacks.forEach((cb) => {\n                    if (state === FULFILLED) {\n                        cb.onFulfilled(x);\n                    }\n                    else {\n                        cb.onRejected(x);\n                    }\n                });\n            });\n        }\n    };\n\n    function resolve(value) {\n        if (value instanceof SimplePromise) {\n            value.then(resolve, reject);\n        }\n        else {\n            transition(FULFILLED, value);\n        }\n    }\n\n    function reject(reason) {\n        transition(REJECTED, reason);\n    }\n}\n\nfunction resolvePromise(promise, x, resolve, reject) {\n    // TODO - bug with rejecting with new TypeError\n    if (promise === x) {\n        reject(new TypeError('You cannot resolve a promise with itself'));\n    }\n    else if (x instanceof SimplePromise) {\n        if (x.state === PENDING) {\n            x.then((v) => {\n                resolvePromise(promise, v, resolve, reject);\n            }, reject);\n        }\n        else {\n            x.then(resolve, reject);\n        }\n    }\n    else if (x !== null && (isObject(x) || isFunction(x))) {\n        let thenCalledOrThrow = false;\n\n        try {\n            const then = x.then;\n\n            if (isFunction(then)) {\n                then.call(x, (y) => {\n                    if (!thenCalledOrThrow) {\n                        thenCalledOrThrow = true;\n                        resolvePromise(promise, y, resolve, reject);\n                    }\n                }, (r) => {\n                    if (!thenCalledOrThrow) {\n                        thenCalledOrThrow = true;\n                        reject(r);\n                    }\n                });\n            }\n            else {\n                resolve(x);\n            }\n        }\n        catch (e) {\n            if (!thenCalledOrThrow) {\n                thenCalledOrThrow = true;\n                reject(e);\n            }\n        }\n    }\n    else {\n        resolve(x);\n    }\n}\n\nSimplePromise.prototype.then = function (onFulfilled, onRejected) {\n    const onFulfill = isFunction(onFulfilled) ? onFulfilled : (v) => v;\n    const onReject = isFunction(onRejected) ? onRejected : (r) => {\n        throw r;\n    };\n\n    let promise2;\n\n    function schedulePromiseResolution(resolve, reject, state, value) {\n        try {\n            const x = (state === FULFILLED) ? onFulfill(value) : onReject(value);\n            resolvePromise(promise2, x, resolve, reject);\n        }\n        catch (e) {\n            reject(e);\n        }\n    }\n\n    if (this.state === PENDING) {\n        promise2 = new SimplePromise((resolve, reject) => {\n            this.callbacks.push({\n                onFulfilled: (value) => {\n                    schedulePromiseResolution(resolve, reject, FULFILLED, value);\n                },\n                onRejected: (reason) => {\n                    schedulePromiseResolution(resolve, reject, REJECTED, reason);\n                },\n            });\n        });\n    }\n    else {\n        promise2 = new SimplePromise((resolve, reject) => {\n            setTimeout(() => {\n                schedulePromiseResolution(resolve, reject, this.state, this.x);\n            });\n        });\n    }\n\n    return promise2;\n};\n\nSimplePromise.prototype.catch = function (onRejected) {\n    return this.then(null, onRejected);\n};\n\nSimplePromise.prototype.finally = function (cb) {\n    return this.then((v) => {\n        setTimeout(cb);\n        return v;\n    }, (r) => {\n        setTimeout(cb);\n        throw r;\n    });\n};\n\nSimplePromise.resolve = function (value) {\n    return new SimplePromise((resolve) => {\n        resolve(value);\n    });\n};\n\nSimplePromise.reject = function (reason) {\n    return new SimplePromise((resolve, reject) => {\n        reject(reason);\n    });\n};\n\nSimplePromise.all = function (promises) {\n    // TODO - bug with rejecting with new TypeError\n    if (!Array.isArray(promises)) {\n        return SimplePromise.reject(new TypeError('You must pass an array to SimplePromise.all.'));\n    }\n\n    return new SimplePromise((resolve, reject) => {\n        let remaining = promises.length;\n        const values = [];\n\n        if (remaining === 0) {\n            resolve(values);\n        }\n\n        promises.forEach((promise, i) => {\n            SimplePromise.resolve(promise).then((value) => {\n                values[i] = value;\n\n                if (--remaining === 0) {\n                    resolve(values);\n                }\n            }, (reason) => reject(reason));\n        });\n    });\n};\n\n/**\n * TODO - bug, then is called for every resolved promise\n */\nSimplePromise.race = function (promises) {\n    // TODO - bug with rejecting with new TypeError\n    if (!Array.isArray(promises)) {\n        return SimplePromise.reject(new TypeError('You must pass an array to SimplePromise.race.'));\n    }\n\n    return new SimplePromise((resolve, reject) => {\n        promises.forEach((promise) => {\n            SimplePromise.resolve(promise).then(resolve, reject);\n        });\n    });\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/"],"sourceRoot":""}